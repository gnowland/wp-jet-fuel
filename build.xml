<?xml version="1.0" encoding="UTF-8"?>
<project name="JetFuel" default="build" basedir=".">
  <property name="php_bin_path" value="/usr/local/bin"/>

  <target name="build">
    <phingcall target="prepare"/>
    <phingcall target="composer"/>
    <phingcall target="transfer"/>
  </target>

  <target name="prepare">
    <delete dir="dist"/>
    <mkdir dir="dist"/>
  </target>

  <target name="composer">
    <composer command="update" composer="${php_bin_path}/composer.phar">
      <arg value="--no-dev"/>
      <arg value="--optimize-autoloader"/>
      <arg value="--prefer-dist"/>
      <arg value="--no-interaction"/>
    </composer>
  </target>

  <target name="transfer">
    <copy todir="dist">
        <fileset dir="vendor">
            <include name="autoload.php"></include>
            <include name="composer/**.php"></include>
        </fileset>
    </copy>
  </target>

</project>
